rukayat@ubuntu:~/Desktop$ cd ~
rukayat@ubuntu:~$ sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'
[sudo] password for rukayat: 
rukayat@ubuntu:~$ wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
OK
rukayat@ubuntu:~$ sudo apt-get update
Hit:1 http://us.archive.ubuntu.com/ubuntu focal InRelease
Hit:2 http://security.ubuntu.com/ubuntu focal-security InRelease
Hit:3 http://us.archive.ubuntu.com/ubuntu focal-updates InRelease          
Hit:4 http://us.archive.ubuntu.com/ubuntu focal-backports InRelease        
Get:5 http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease [81.6 kB]
Get:6 http://apt.postgresql.org/pub/repos/apt focal-pgdg/main amd64 Packages [190 kB]
Fetched 271 kB in 1s (309 kB/s)    
Reading package lists... Done
N: Skipping acquire of configured file 'main/binary-i386/Packages' as repository 'http://apt.postgresql.org/pub/repos/apt focal-pgdg InRelease' doesn't support architecture 'i386'
rukayat@ubuntu:~$ sudo apt-get -y install postgresql
E: Could not get lock /var/lib/dpkg/lock-frontend. It is held by process 7972 (unattended-upgr)
N: Be aware that removing the lock file is not a solution and may break your system.
E: Unable to acquire the dpkg frontend lock (/var/lib/dpkg/lock-frontend), is another process using it?
rukayat@ubuntu:~$ sudo apt-get install postgresql
E: Could not get lock /var/lib/dpkg/lock-frontend. It is held by process 7972 (unattended-upgr)
N: Be aware that removing the lock file is not a solution and may break your system.
E: Unable to acquire the dpkg frontend lock (/var/lib/dpkg/lock-frontend), is another process using it?
rukayat@ubuntu:~$ sudo apt-get -y install postgresql
E: Could not get lock /var/lib/dpkg/lock-frontend. It is held by process 7972 (unattended-upgr)
N: Be aware that removing the lock file is not a solution and may break your system.
E: Unable to acquire the dpkg frontend lock (/var/lib/dpkg/lock-frontend), is another process using it?
rukayat@ubuntu:~$ sudo apt-get install postgresql-12
E: Could not get lock /var/lib/dpkg/lock-frontend. It is held by process 7972 (unattended-upgr)
N: Be aware that removing the lock file is not a solution and may break your system.
E: Unable to acquire the dpkg frontend lock (/var/lib/dpkg/lock-frontend), is another process using it?
rukayat@ubuntu:~$ ^C
rukayat@ubuntu:~$ sudo rm /var/lib/apt/lists/lock
rukayat@ubuntu:~$ sudo rm /var/cache/apt/archives/lock
rukayat@ubuntu:~$ sudo rm /var/lib/dpkg/lock
rukayat@ubuntu:~$ sudo apt-get -y install postgresql
E: Could not get lock /var/lib/dpkg/lock-frontend. It is held by process 7972 (unattended-upgr)
N: Be aware that removing the lock file is not a solution and may break your system.
E: Unable to acquire the dpkg frontend lock (/var/lib/dpkg/lock-frontend), is another process using it?
rukayat@ubuntu:~$ cd Desktop
rukayat@ubuntu:~/Desktop$ sudo apt-get -y install postgresql
E: Could not get lock /var/lib/dpkg/lock-frontend. It is held by process 7972 (unattended-upgr)
N: Be aware that removing the lock file is not a solution and may break your system.
E: Unable to acquire the dpkg frontend lock (/var/lib/dpkg/lock-frontend), is another process using it?
rukayat@ubuntu:~/Desktop$ pgrep -a apt
32992 /usr/bin/python3 /usr/sbin/aptd
rukayat@ubuntu:~/Desktop$ sudo kill 32992
[sudo] password for rukayat: 
rukayat@ubuntu:~/Desktop$ sudo apt-get -y install postgresql
E: Could not get lock /var/lib/dpkg/lock-frontend. It is held by process 32992 (aptd)
N: Be aware that removing the lock file is not a solution and may break your system.
E: Unable to acquire the dpkg frontend lock (/var/lib/dpkg/lock-frontend), is another process using it?
rukayat@ubuntu:~/Desktop$ pgrep -a apt
32992 /usr/bin/python3 /usr/sbin/aptd
rukayat@ubuntu:~/Desktop$ sudo kill 32992
rukayat@ubuntu:~/Desktop$ sudo kill 32992
kill: (32992): No such process
rukayat@ubuntu:~/Desktop$ sudo apt-get -y install postgresql
Reading package lists... Done
Building dependency tree       
Reading state information... Done
The following packages were automatically installed and are no longer required:
  libfprint-2-tod1 linux-headers-5.4.0-42 linux-headers-5.4.0-42-generic
  linux-image-5.4.0-42-generic linux-modules-5.4.0-42-generic linux-modules-extra-5.4.0-42-generic
Use 'sudo apt autoremove' to remove them.
The following additional packages will be installed:
  libpq5 pgdg-keyring postgresql-13 postgresql-client-13 postgresql-client-common postgresql-common
  sysstat
Suggested packages:
  postgresql-doc postgresql-doc-13 libjson-perl isag
The following NEW packages will be installed:
  pgdg-keyring postgresql postgresql-13 postgresql-client-13 postgresql-client-common
  postgresql-common sysstat
The following packages will be upgraded:
  libpq5
1 upgraded, 7 newly installed, 0 to remove and 108 not upgraded.
Need to get 17.4 MB/17.6 MB of archives.
After this operation, 58.1 MB of additional disk space will be used.
Get:1 http://us.archive.ubuntu.com/ubuntu focal/main amd64 sysstat amd64 12.2.0-2 [453 kB]
Get:2 http://apt.postgresql.org/pub/repos/apt focal-pgdg/main amd64 pgdg-keyring all 2018.2 [10.7 kB]
Get:3 http://apt.postgresql.org/pub/repos/apt focal-pgdg/main amd64 postgresql-client-common all 223.pgdg20.04+1 [88.9 kB]
Get:4 http://apt.postgresql.org/pub/repos/apt focal-pgdg/main amd64 postgresql-client-13 amd64 13.1-1.pgdg20.04+1 [1,493 kB]
Get:5 http://apt.postgresql.org/pub/repos/apt focal-pgdg/main amd64 postgresql-common all 223.pgdg20.04+1 [237 kB]
Get:6 http://apt.postgresql.org/pub/repos/apt focal-pgdg/main amd64 postgresql-13 amd64 13.1-1.pgdg20.04+1 [15.0 MB]
Get:7 http://apt.postgresql.org/pub/repos/apt focal-pgdg/main amd64 postgresql all 13+223.pgdg20.04+1 [64.5 kB]
Fetched 17.4 MB in 3s (6,255 kB/s)
Preconfiguring packages ...
(Reading database ... 235936 files and directories currently installed.)
Preparing to unpack .../0-libpq5_13.1-1.pgdg20.04+1_amd64.deb ...
Unpacking libpq5:amd64 (13.1-1.pgdg20.04+1) over (12.5-0ubuntu0.20.04.1) ...
Selecting previously unselected package pgdg-keyring.
Preparing to unpack .../1-pgdg-keyring_2018.2_all.deb ...
Unpacking pgdg-keyring (2018.2) ...
Selecting previously unselected package postgresql-client-common.
Preparing to unpack .../2-postgresql-client-common_223.pgdg20.04+1_all.deb ...
Unpacking postgresql-client-common (223.pgdg20.04+1) ...
Selecting previously unselected package postgresql-client-13.
Preparing to unpack .../3-postgresql-client-13_13.1-1.pgdg20.04+1_amd64.deb ...
Unpacking postgresql-client-13 (13.1-1.pgdg20.04+1) ...
Selecting previously unselected package postgresql-common.
Preparing to unpack .../4-postgresql-common_223.pgdg20.04+1_all.deb ...
Adding 'diversion of /usr/bin/pg_config to /usr/bin/pg_config.libpq-dev by postgresql-common'
Unpacking postgresql-common (223.pgdg20.04+1) ...
Selecting previously unselected package postgresql-13.
Preparing to unpack .../5-postgresql-13_13.1-1.pgdg20.04+1_amd64.deb ...
Unpacking postgresql-13 (13.1-1.pgdg20.04+1) ...
Selecting previously unselected package postgresql.
Preparing to unpack .../6-postgresql_13+223.pgdg20.04+1_all.deb ...
Unpacking postgresql (13+223.pgdg20.04+1) ...
Selecting previously unselected package sysstat.
Preparing to unpack .../7-sysstat_12.2.0-2_amd64.deb ...
Unpacking sysstat (12.2.0-2) ...
Setting up pgdg-keyring (2018.2) ...
Removing apt.postgresql.org key from trusted.gpg: OK
Setting up libpq5:amd64 (13.1-1.pgdg20.04+1) ...
Setting up sysstat (12.2.0-2) ...

Creating config file /etc/default/sysstat with new version
update-alternatives: using /usr/bin/sar.sysstat to provide /usr/bin/sar (sar) in auto mode
Created symlink /etc/systemd/system/multi-user.target.wants/sysstat.service → /lib/systemd/system/sysstat.service.
Setting up postgresql-client-common (223.pgdg20.04+1) ...
Setting up postgresql-client-13 (13.1-1.pgdg20.04+1) ...
update-alternatives: using /usr/share/postgresql/13/man/man1/psql.1.gz to provide /usr/share/man/man1/psql.1.gz (psql.1.gz) in auto mode
Setting up postgresql-common (223.pgdg20.04+1) ...
Adding user postgres to group ssl-cert

Creating config file /etc/postgresql-common/createcluster.conf with new version
Building PostgreSQL dictionaries from installed myspell/hunspell packages...
  en_us
Removing obsolete dictionary files:
Created symlink /etc/systemd/system/multi-user.target.wants/postgresql.service → /lib/systemd/system/postgresql.service.
Setting up postgresql-13 (13.1-1.pgdg20.04+1) ...
Creating new PostgreSQL cluster 13/main ...
/usr/lib/postgresql/13/bin/initdb -D /var/lib/postgresql/13/main --auth-local peer --auth-host md5
The files belonging to this database system will be owned by user "postgres".
This user must also own the server process.

The database cluster will be initialized with locale "en_US.UTF-8".
The default database encoding has accordingly been set to "UTF8".
The default text search configuration will be set to "english".

Data page checksums are disabled.

fixing permissions on existing directory /var/lib/postgresql/13/main ... ok
creating subdirectories ... ok
selecting dynamic shared memory implementation ... posix
selecting default max_connections ... 100
selecting default shared_buffers ... 128MB
selecting default time zone ... America/Los_Angeles
creating configuration files ... ok
running bootstrap script ... ok
performing post-bootstrap initialization ... ok
syncing data to disk ... ok

Success. You can now start the database server using:

    pg_ctlcluster 13 main start

Ver Cluster Port Status Owner    Data directory              Log file
13  main    5432 down   postgres /var/lib/postgresql/13/main /var/log/postgresql/postgresql-13-main.log
update-alternatives: using /usr/share/postgresql/13/man/man1/postmaster.1.gz to provide /usr/share/man/man1/postmaster.1.gz (postmaster.1.gz) in auto mode
Setting up postgresql (13+223.pgdg20.04+1) ...
Processing triggers for systemd (245.4-4ubuntu3.3) ...
Processing triggers for man-db (2.9.1-1) ...
Processing triggers for libc-bin (2.31-0ubuntu9.1) ...
rukayat@ubuntu:~/Desktop$ sudo apt install postgresql postgresql-contrib
Reading package lists... Done
Building dependency tree       
Reading state information... Done
postgresql is already the newest version (13+223.pgdg20.04+1).
The following packages were automatically installed and are no longer required:
  libfprint-2-tod1 linux-headers-5.4.0-42 linux-headers-5.4.0-42-generic
  linux-image-5.4.0-42-generic linux-modules-5.4.0-42-generic linux-modules-extra-5.4.0-42-generic
Use 'sudo apt autoremove' to remove them.
The following NEW packages will be installed:
  postgresql-contrib
0 upgraded, 1 newly installed, 0 to remove and 108 not upgraded.
Need to get 64.5 kB of archives.
After this operation, 69.6 kB of additional disk space will be used.
Do you want to continue? [Y/n] Y
Get:1 http://apt.postgresql.org/pub/repos/apt focal-pgdg/main amd64 postgresql-contrib all 13+223.pgdg20.04+1 [64.5 kB]
Fetched 64.5 kB in 1s (93.0 kB/s)       
Selecting previously unselected package postgresql-contrib.
(Reading database ... 237973 files and directories currently installed.)
Preparing to unpack .../postgresql-contrib_13+223.pgdg20.04+1_all.deb ...
Unpacking postgresql-contrib (13+223.pgdg20.04+1) ...
Setting up postgresql-contrib (13+223.pgdg20.04+1) ...
rukayat@ubuntu:~/Desktop$ sudo -i -u postgres
postgres@ubuntu:~$ psql
psql (13.1 (Ubuntu 13.1-1.pgdg20.04+1))
Type "help" for help.

postgres=# create database userdb
postgres-# \l
                                  List of databases
   Name    |  Owner   | Encoding |   Collate   |    Ctype    |   Access privileges   
-----------+----------+----------+-------------+-------------+-----------------------
 postgres  | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | 
 template0 | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/postgres          +
           |          |          |             |             | postgres=CTc/postgres
 template1 | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/postgres          +
           |          |          |             |             | postgres=CTc/postgres
(3 rows)

postgres-# create database userdb;
ERROR:  syntax error at or near "create"
LINE 2: create database userdb;
        ^
postgres=# CREATE DATABASE
postgres-# \l
                                  List of databases
   Name    |  Owner   | Encoding |   Collate   |    Ctype    |   Access privileges   
-----------+----------+----------+-------------+-------------+-----------------------
 postgres  | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | 
 template0 | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/postgres          +
           |          |          |             |             | postgres=CTc/postgres
 template1 | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/postgres          +
           |          |          |             |             | postgres=CTc/postgres
(3 rows)

postgres-# create database userdb;
ERROR:  syntax error at or near "create"
LINE 2: create database userdb;
        ^
postgres=# create database userdb
postgres-# CREATE DATABASE
postgres-# \l
                                  List of databases
   Name    |  Owner   | Encoding |   Collate   |    Ctype    |   Access privileges   
-----------+----------+----------+-------------+-------------+-----------------------
 postgres  | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | 
 template0 | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/postgres          +
           |          |          |             |             | postgres=CTc/postgres
 template1 | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/postgres          +
           |          |          |             |             | postgres=CTc/postgres
(3 rows)

postgres-# \c userdb
FATAL:  database "userdb" does not exist
Previous connection kept
postgres-# create database userdb
postgres-# ^C
postgres=# CREATE DATABASE userdb;
CREATE DATABASE
postgres=# \l
                                  List of databases
   Name    |  Owner   | Encoding |   Collate   |    Ctype    |   Access privileges   
-----------+----------+----------+-------------+-------------+-----------------------
 postgres  | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | 
 template0 | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/postgres          +
           |          |          |             |             | postgres=CTc/postgres
 template1 | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/postgres          +
           |          |          |             |             | postgres=CTc/postgres
 userdb    | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | 
(4 rows)

postgres=# ^C
postgres=# 
